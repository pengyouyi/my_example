<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>hello</title>
</head>
<body>
    
<script>  
/**
 * @param {string} pattern
 * @param {string} str
 * @return {boolean}
 */
var wordPattern = function(pattern, str) {
    var isSame = function(str1, str2) {
    	if (str1.length !== str2.length) {
    		return false
    	}
    	for(let i = 0; i < str1.length; i++) {
    		if (str1[i] !== str2[i]) {
    			return false
    		}
    	}
    	return true
    }
    var arr = str.split(' ');
    if (pattern.length !== arr.length) {
    	return false;
    }
    var obj = {};
    var obj2 = {};
    for (let j = 0; j < pattern.length; j++) {
        if (!obj[pattern[j]]) {
        	obj[pattern[j]] = [j]
        } else {
        	obj[pattern[j]].push(j)
        }
    }
    for (let j = 0; j < arr.length; j++) {
        if (!obj2[arr[j]]) {
        	obj2[arr[j]] = [j]
        } else {
        	obj2[arr[j]].push(j)
        }
    }
    if (Object.keys(obj).length !== Object.keys(obj2).length) {
    	return false;
    }
    for (let key in obj) {
        for (let m = 0; m < obj[key].length; m++) {
        	if (!isSame(arr[obj[key][0]],arr[obj[key][m]])) {
        		return false
        	}
        }
        return true
    }
    return true
};
var pattern = "abba";
var str = "dog cat dog cat";
console.log(wordPattern(pattern, str));


var wordPattern2 = function(pattern, str) {
    var arr = str.split(' ');
    if (pattern.length !== arr.length) {
    	return false;
    }
    var objPat = {};
    var objStr = {};
    for (let j = 0; j < pattern.length; j++) {
        if (!objPat[pattern[j]]) {
        	objPat[pattern[j]] = [j]
        } else {
        	objPat[pattern[j]].push(j)
        }
    }
    for (let j = 0; j < arr.length; j++) {
        if (!objStr[arr[j]]) {
        	objStr[arr[j]] = [j]
        } else {
        	objStr[arr[j]].push(j)
        }
    }
    if (Object.keys(objPat).length !== Object.keys(objStr).length) {
    	return false;
    }
    for (let k = 0; k < Object.keys(objPat).length; k++) {
        for (let m = 0; m < objPat[Object.keys(objPat)[k]].length; m++) {
        	if (objPat[Object.keys(objPat)[k]][m] !== objStr[Object.keys(objStr)[k]][m]) {
        		return false
        	}
        }
        return true
    }
    return true;
};
console.log(wordPattern2(pattern, str));
</script>
</body>
</html>

